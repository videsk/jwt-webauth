{"version":3,"sources":["webpack://WebAuth/webpack/universalModuleDefinition","webpack://WebAuth/webpack/bootstrap","webpack://WebAuth/./index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","version","require","WebAuth","options","keys","accessToken","refreshToken","config","endpoints","hostname","url","method","authorizationType","headers","body","status","expired","ok","attempts","this","events","error","renewed","empty","load","storage","localStorage","getItem","_stop","_load","stop","logout","access","refresh","remember","constructor","getTokens","verifyJWT","saveTokens","askServer","observer","e","Error","renew","event","callback","removeItem","sessionStorage","isAccessTokenExpired","Date","getTime","getExpirationToken","setTimeout","isRefreshTokenExpired","response","tokenName","tokens","xHeaders","assign","Authorization","xBody","fullURL","payload","includes","toLowerCase","JSON","stringify","fetch","Array","isArray","json","clean","JWT","parse","atob","split","token","setItem","decoded","exp","Infinity"],"mappings":"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","file":"web-auth.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WebAuth\"] = factory();\n\telse\n\t\troot[\"WebAuth\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const { version } = require('./package.json');\n\nclass WebAuth {\n\n    constructor(options = {}) {\n        const {\n            keys = { accessToken: 'auth-key', refreshToken: 'auth-key-refresh' },\n            config = {\n                endpoints: {\n                    hostname: 'http://localhost:3000/',\n                    accessToken: {\n                        url: 'check-token',\n                        method: 'GET',\n                        authorizationType: 'Bearer',\n                        headers: {\n                            'Content-Type': 'application/json'\n                        },\n                        body: {},\n                        keys: {\n                            accessToken: 'accessToken',\n                            refreshToken: 'refreshToken',\n                        },\n                        status: {\n                            expired: 401,\n                            ok: 200,\n                        },\n                        attempts: 3\n                    },\n                    refreshToken: {\n                        url: 'refresh-token',\n                        method: 'POST',\n                        authorizationType: 'Bearer',\n                        headers: {\n                            'Content-Type': 'application/json'\n                        },\n                        body: {},\n                        keys: {\n                            accessToken: 'accessToken',\n                            refreshToken: 'refreshToken',\n                        },\n                        status: {\n                            expired: 401,\n                            ok: 201,\n                        },\n                        attempts: 3\n                    },\n                },\n            },\n        } = options;\n\n        this.keys = keys;\n        this.events = {\n            expired: () => {},\n            error: () => {},\n            renewed: () => {},\n            empty: () => {},\n            load: () => {},\n        };\n        this.config = config;\n        this.storage = (window.localStorage.getItem(this.keys.accessToken)) ? 'localStorage' : 'sessionStorage';\n\n        this._stop = false;\n        this.version = version;\n        this._load = false;\n\n        // wrappers\n        this.stop = this.logout;\n    }\n\n    /**\n     * Set WebAuth and start observer\n     * @param access {String=} - accessToken\n     * @param refresh {String=} - refreshToken\n     * @param remember {Boolean=} - Save in session or local storage\n     * @returns {Promise<*|undefined>}\n     */\n    async set(access = '', refresh = '', remember) {\n        this._stop = false;\n        if (typeof remember === 'boolean') this.storage = remember ? 'localStorage' : 'sessionStorage';\n        const { accessToken = access, refreshToken = refresh } = this.constructor.getTokens(this.storage, this.keys);\n        if (!accessToken) return this.events.empty();\n\n        this.verifyJWT(accessToken, 'accessToken');\n        if (refreshToken) this.verifyJWT(refreshToken, 'refreshToken');\n        this.constructor.saveTokens(this.storage, this.keys, accessToken, refreshToken);\n\n        try {\n            await this.askServer();\n            return this.observer();\n        } catch (e) {\n            if (e instanceof Error) return this.events.error(e);\n            this.events.expired('accessToken');\n            return this.renew();\n        }\n    }\n\n    /**\n     * Set event\n     * @param event\n     * @param callback\n     */\n    on(event = '', callback = () => {}) {\n        this.events[event] = callback;\n    }\n\n    /**\n     * Clean tokens from storage\n     */\n    clean() {\n        // Remove from localStorage\n        window.localStorage.removeItem(this.keys.accessToken);\n        window.localStorage.removeItem(this.keys.refreshToken);\n        // Remove from sessionStorage\n        window.sessionStorage.removeItem(this.keys.accessToken);\n        window.sessionStorage.removeItem(this.keys.refreshToken);\n    }\n\n    /**\n     * Start expiration tokens observer\n     * @returns {Promise<*|undefined>|NodeJS.Timeout|*}\n     */\n    observer(attempts = 1) {\n        const { accessToken, refreshToken } = this.constructor.getTokens(this.storage, this.keys);\n        if (this._stop || !accessToken) return;\n        const isAccessTokenExpired = new Date().getTime() > this.constructor.getExpirationToken(accessToken);\n        if (!isAccessTokenExpired && !this._load) {\n            this._load = true;\n            this.events.load();\n        }\n        if (!isAccessTokenExpired) return setTimeout(() => this.observer(), 1000);\n        if (attempts < 2) this.events.expired('accessToken');\n        if (!refreshToken) return;\n        // Try to get new refreshToken\n        return this.renew(attempts);\n    }\n\n    /**\n     * Force renew accessToken\n     * @returns {Promise<*|undefined|NodeJS.Timeout>}\n     */\n    async renew(attempts = 1) {\n        // Check refreshToken was not expired\n        const refreshToken = this.constructor.getTokens(this.storage, this.keys, 'refreshToken');\n        const isRefreshTokenExpired = new Date().getTime() > this.constructor.getExpirationToken(refreshToken);\n        if (isRefreshTokenExpired) return this.events.expired('refreshToken');\n\n        const { refreshToken: config } = this.config.endpoints;\n        try {\n            const { accessToken } = config.keys;\n            const response = await this.askServer('refreshToken');\n            this.constructor.saveTokens(this.storage, this.keys, response[accessToken], refreshToken);\n            this.events.renewed();\n            return this.observer();\n        } catch (e) {\n            if (!(e instanceof Error)) return; // Only if was expired\n            if (attempts >= config.attempts) return this.events.error(e);\n            setTimeout(() => this.observer(attempts + 1), 1000 * (attempts + 1));\n        }\n    }\n\n    /**\n     * Send to server request to check or renew access token\n     * @param tokenName {String} - Could be accessToken or refreshToken\n     * @returns {Promise<any>}\n     */\n    async askServer(tokenName = 'accessToken') {\n        if (this._stop) return;\n        const {url, body, headers, method, authorizationType, keys, status} = this.config.endpoints[tokenName];\n        // Create payload\n        const tokens = this.constructor.getTokens(this.storage, this.keys);\n        const xHeaders = Object.assign(headers, {Authorization: `${authorizationType} ${tokens[tokenName]}`});\n        const xBody = Object.assign(body, { [keys[tokenName]]: tokens[tokenName] });\n        // Send request\n        const fullURL = `${this.config.endpoints.hostname}${url}`;\n        const payload = { method, headers: xHeaders };\n        if (['post', 'patch', 'put'].includes(method.toLowerCase())) payload.body = JSON.stringify(xBody);\n        const response = await fetch(fullURL, payload);\n        if (response.status === status.ok || (Array.isArray(status.ok) && status.ok.includes(response.status))) return response.json();\n        if (response.status !== status.expired && response instanceof Error || (Array.isArray(status.expired) && response.expired.includes(response.status))) throw response;\n        // Clean store and fire expired event\n        throw this.events.expired(tokenName);\n    }\n\n    /**\n     * Stop observer and clean tokens\n     * @param value\n     */\n    logout(value = true) {\n        this._stop = value;\n        this._load = false;\n        this.clean();\n    }\n\n    /**\n     * Verify JWT is valid\n     * @param JWT {String} - JWT\n     * @param name {String} - Name of token\n     */\n    verifyJWT(JWT = '', name = '') {\n        try {\n            JSON.parse(atob(JWT.split('.')[1]));\n        } catch (e) {\n            this.events.error(e);\n            throw new Error(`${name} is not valid JWT.`);\n        }\n    }\n\n    /**\n     *\n     * Get tokens from storage\n     * @param storage {String} - Session or local storage\n     * @param keys {Object} - Key names of storage\n     * @param token {String} - Name of key want returned\n     * @returns {string|{accessToken: string, refreshToken: string}}\n     */\n    static getTokens(storage = 'sessionStorage', keys = {}, token = '') {\n        const accessToken = window[storage].getItem(keys.accessToken);\n        const refreshToken = window[storage].getItem(keys.refreshToken);\n        if (token) return token === 'accessToken' ? accessToken : refreshToken;\n        return (accessToken || refreshToken) ? { accessToken, refreshToken } : {};\n    }\n\n    /**\n     * Save tokens in storage\n     * @param storage {String} - Name of storage\n     * @param keys {Object} - Key names of storage\n     * @param accessToken {String} - JWT access\n     * @param refreshToken {String} - JWT refresh\n     */\n    static saveTokens(storage = 'sessionStorage', keys = {}, accessToken = '', refreshToken = '') {\n        window[storage].setItem(keys.accessToken, accessToken);\n        window[storage].setItem(keys.refreshToken, refreshToken);\n    }\n\n    /**\n     * Get expiration of JWT\n     * @param JWT {String} - Valid JWT\n     * @returns {number|number}\n     */\n    static getExpirationToken(JWT = '') {\n        const decoded = JSON.parse(atob(JWT.split('.')[1]));\n        if (typeof decoded !== 'object') throw new Error('Invalid JWT, please check.');\n        return ('exp' in decoded) ? decoded.exp * 1000 : Infinity;\n    }\n\n    /**\n     * Get the name of storage based on tokens existence\n     * @param key\n     * @returns {string} - Key name want search in storage\n     */\n    static getStorage(key = '') {\n        return (window.localStorage.getItem(key)) ? 'localStorage' : 'sessionStorage';\n    }\n}\n\nif (typeof define === 'function' && define.amd) {\n    define('WebAuth', [], function() {\n        return WebAuth;\n    });\n}\n\nif (typeof module !== 'undefined') {\n    module.exports = WebAuth;\n}\n"],"sourceRoot":""}